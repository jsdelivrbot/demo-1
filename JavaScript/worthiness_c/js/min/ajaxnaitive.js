function sendAjax(e){console.log("ajax実行関数"),e.open("POST","/wp-content/themes/worthiness-clothing/ajaxcontent.php",!0),e.setRequestHeader("content-type","application/json; charset=UTF-8"),e.send(ajaxRequestsJson()),console.log("Json = "+ajaxRequestsJson()),console.log("リクエスト = "+e.status)}function ajaxRequestsJson(){console.log("リクエストデータをjsonにする関数");var e=elementObj().indexLoop.length,o=JSON.stringify({nonce:AjaxData.nonce,category:AjaxData.category,tag:AjaxData.tag,post_type:AjaxData.post_type,search:AjaxData.search,looplength:e,year:AjaxData.year,month:AjaxData.month});return o}function elementObj(){var e=document.querySelectorAll("body")[0],o=document.querySelectorAll("html")[0],t=document.querySelectorAll(".article_list"),n=document.querySelectorAll(".article_list")[0],a=document.querySelectorAll(".article_box"),l=document.querySelectorAll(".article_box")[0],r=document.querySelector(".more_btn a"),s=document.querySelectorAll("#single"),c=$(window).height();return{body:e,html:o,indexLoop:t,indexLoop0:n,responseArea:a,responseArea0:l,responseAreaChild:r,single:s,windowHeight:c}}function bodyScrollSenser(){var e,o=elementObj();return e=0===o.body.scrollTop||o.body.scrollTop===!1?o.html.scrollTop:o.body.scrollTop}function processPoint(){var e=elementObj();if(e.indexLoop0){var o=Math.floor(e.responseArea0.offsetWidth/e.indexLoop0.offsetWidth),t=allLoopHeight()/o,n=bodyScrollSenser()+e.windowHeight+.1*e.windowHeight;return{bodyPoint:n,endPoint:t}}return{bodyPoint:0,endPoint:0}}function allLoopHeight(){for(var e=elementObj(),o=0,t=0;t<e.indexLoop.length;t++)o+=e.indexLoop[t].offsetHeight;return o}function scrollSenser(e){console.log("スクロール検知関数="+AjaxData.flag);var o=AjaxData.flag,t=elementObj(),n=processPoint();console.log(t.indexLoop.length),0===t.indexLoop.length&&"false"===AjaxData.is_single?(console.log("初回"),sendAjax(e)):t.indexLoop.length>1&&(o===!1||o===!0&&n.endPoint<n.bodyPoint&&(0!==e.readyState&&4!==e.readyState||sendAjax(e)))}var Request=new XMLHttpRequest;window.addEventListener("load",function(){scrollSenser(Request);var e=document.querySelector(".more_btn");e.addEventListener("click",function(){return scrollSenser(Request),!1})},!1),Request.onloadstart=function(e){console.log("スタート");var o=elementObj();if(AjaxData.registered!==!0){o.responseArea0.style.opacity="0.5";var t=document.createElement("div");t.id="loading",o.body.appendChild(t),AjaxData.registered=!0}},Request.onreadystatechange=function(){console.log("現在"+Request.readyState)},Request.onloadend=function(e){console.log("load 終了");var o=elementObj();o.responseArea0.style.opacity="1.0",0==AjaxData.flag&&(o.responseAreaChild.parentNode.style.display="none",console.log(o.responseAreaChild));var t=document.getElementById("loading");o.body.removeChild(t),AjaxData.registered=!1},Request.onload=function(){console.log("記事をload");var e=elementObj(),o=JSON.parse(Request.response);console.log(o),AjaxData.flag=o.flag;var t=document.createElement("div");t.className+="section_group",t.innerHTML=o.html,e.responseArea0.appendChild(t)},Request.onerror=function(e){console.log("erroe")},Request.ontimeout=function(){console.log("タイムアウト")},Request.onabort=function(){console.log("中断しました")};